import requests
from lxml import etree
url = 'https://tieba.baidu.com/p/1675141036#!/l/p1'
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36',
    'Cookie':'XFI=c3634830-ce60-11ee-9f2f-a1360ae7f803; XFCS=66904AC0D76D222A43B15C23B84A637D660C55F28D5B7BE146991502572F687D; XFT=sflM9udLWeNwLyUuvYdTIbIBKQeBq/Fz2nAOeZX6wZM=; BIDUPSID=FB0604F06671C921C5B4A494176268C9; PSTM=1699626961; BAIDUID=FB0604F06671C921D17DDEBCED73AEDC:FG=1; BDUSS=mJvNEotZ1FBQ0FjUlYxS2d0Wmhoc2VDWUNVUzV1UTZzMXc3Rjc1OGVnTVFKWkJsSVFBQUFBJCQAAAAAAAAAAAEAAACJGuPnvsnIy7K7uLLgxeDFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABCYaGUQmGhlU; BDUSS_BFESS=mJvNEotZ1FBQ0FjUlYxS2d0Wmhoc2VDWUNVUzV1UTZzMXc3Rjc1OGVnTVFKWkJsSVFBQUFBJCQAAAAAAAAAAAEAAACJGuPnvsnIy7K7uLLgxeDFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABCYaGUQmGhlU; H_WISE_SIDS=40038_39825; H_WISE_SIDS_BFESS=40038_39825; BAIDUID_BFESS=FB0604F06671C921D17DDEBCED73AEDC:FG=1; ZFY=MEFwjTrYvX65GVvmNn:A4K7RfEFINLv5ewip7E5WzQuw:C; H_PS_PSSID=39661_39996_40172_40212_40216_40222; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; PSINO=5; delPer=0; STOKEN=1cc19273dbb4316544e16d7990832269eb13a215ffce1e1ba580f05e135ff1da; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1708261633; BAIDU_WISE_UID=wapp_1708261634331_336; USER_JUMP=-1; 3890420361_FRSVideoUploadTip=1; video_bubble3890420361=1; st_key_id=17; arialoadData=false; XFI=30aca5a0-ce5f-11ee-b463-0998a864bfae; XFCS=2C03C3F578E18F1C840C648455D72FDFB20D33697DA4363FE14AEDB82BC1ADA9; XFT=tjrXzCF8dDI7oVezQVEU6S4qpASkmBd/46ix1CGVZDo=; wise_device=0; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1708262548; BA_HECTOR=0584042g048l0l202g812l8490199f1it414l1s; ab_sr=1.0.1_ZWE3MDVhMTA0ZmMxMjIyZjI4NjBkODkyMjVmM2QyNTdlNWIzNjBjMzNjNTcwOWIyYzRhZmJjM2ZhYjc3MWFiZTQ1NjdlMmMxYmM0MzFmOWY1MmU1YzMzYzc0YzM4N2RmNjU5NWM4MzY4NzBjYWIyOGI5NmZkY2U0ZTdlNGEyODQyNjZhYmMzMGZhYjkxYmVlNDBlNjQ1NDU2NDgyYjdjZGZjYTYyNjc3OGYyNjlkM2U0NGU4NDZiYjRjNzQyZjgx; st_data=44aec96db9b27afbdd082e80336a2f935544db2115203f3343ff55378bb72970cd1ffb9eaea53c653050d3d3d2a404b69f6cde56910405ca623b2bce63d6dea19023bdef1a94a50de536129883c6ae895383d156b207cb65ba0db41f82ae568865cfe3840e5221833d67223e1500045d509fa2107db15f039332da0d5bd7de8c7fa8f6b42e0fc7e98ce557bdbe62a858; st_sign=fb7a38ee; RT="z=1&dm=baidu.com&si=4e9efef9-2531-48fa-bbf9-4c6f167ce81f&ss=lsrivbmn&sl=2b&tt=16lz&bcn=https%3A%2F%2Ffclog.baidu.com%2Flog%2Fweirwood%3Ftype%3Dperf&ld=rtf4&ul=trtm"'
}
response = requests.get(url,headers).text


selector = etree.HTML(response)
image_urls = selector.xpath('//img[@class="BDE_Image"]/@src')
i = 0
for image in image_urls:
    image_content = requests.get(image).content
    with open('{}.jpg'.format(i),'wb') as f:
        f.write(image_content)
        i = i+1












